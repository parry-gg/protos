// Filtering criteria for tournament and event queries.
// Provides search and filtering capabilities for retrieving specific subsets of data.
syntax = "proto3";

option java_multiple_files = true;
option java_package = "gg.parry.grpc.models";

package parrygg.models;

import "models/bracket.proto";

// EventsFilter specifies criteria for filtering tournament events.
// Next id: 2
message EventsFilter {
  // Filter events by a specific user's participation.
  optional string user_id = 1;
}

// TournamentsFilter specifies criteria for filtering tournaments.
// Next id: 6
message TournamentsFilter {
  // Filter tournaments by a specific user's participation.
  optional string user_id = 1;
  // Filter tournaments by owner (organizer).
  optional string owner_id = 2;
  // Filter tournaments by administrative permissions.
  optional AdminFilter admin_filter = 3;
  // Fuzzy match against tournament names.
  optional string name = 4;
  // Filter tournaments by custom slug (matches all tournaments sharing this custom slug).
  optional string custom_slug = 5;
}

// UsersFilter specifies criteria for searching users.
message UsersFilter {
  // Fuzzy match against user gamer tags.
  optional string gamer_tag = 1;
  // Filter users to only those in a certain event
  optional string event_id = 2;
  // Whether to include users who aren't connected to an account (excluded by default)
  optional bool include_anonymous_users = 3;
}

// AdminFilterPermission defines administrative permission levels for filtering.
// Corresponds to TournamentPermission options in tournament.proto, but with the extra "ANY" option.
enum AdminFilterPermission {
  // Match any permission level.
  ADMIN_FILTER_PERMISSION_ANY = 0;
  // Match admin-level permissions only.
  ADMIN_FILTER_PERMISSION_ADMIN = 1;
  // Match manager-level permissions and above.
  ADMIN_FILTER_PERMISSION_MANAGER = 2;
  // Match reporter-level permissions and above.
  ADMIN_FILTER_PERMISSION_REPORTER = 3;
}

// AdminFilter filters tournaments by user administrative permissions.
message AdminFilter {
  // ID of the user to check permissions for.
  string user_id = 1;
  // Minimum permission level required.
  AdminFilterPermission permission = 2;
}

// MatchesFilter specifies criteria for filtering matches.
message MatchesFilter {
  // Filter matches by a specific user's participation.
  optional string user_id = 1;
  // Filter matches by a specific entrant's participation.
  optional string entrant_id = 2;
  // Filter matches by their current state.
  optional MatchState state = 3;
}
